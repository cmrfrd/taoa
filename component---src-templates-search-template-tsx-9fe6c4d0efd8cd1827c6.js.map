{"version":3,"sources":["webpack://The_Art_of_Abstraction/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://The_Art_of_Abstraction/./src/components/Navigation/Navigation.Paginator.tsx","webpack://The_Art_of_Abstraction/./src/components/Search/Search.tsx","webpack://The_Art_of_Abstraction/./src/templates/search.template.tsx"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","maxPages","count","pageCount","pageRoot","pathPrefix","Constructor","protoProps","staticProps","render","this","previousPath","nextPath","hasNext","currentPage","hasPrevious","mod","a","b","Helmet","rel","href","Frame","PageButton","onClick","setCurrentPage","window","scroll","top","left","behavior","getPageLinks","current","previousPage","pagesRange","range","truncatedRange","slice","unshift","splice","push","Set","map","page","Spacer","aria-hidden","PageNumberBUtton","style","opacity","className","prototype","Component","paginationItemMixin","p","css","theme","colors","primary","mediaqueryup","mediaquery","elements","setSearchResults","placeholder","filter","sort","searching","setSearching","setNumSearchResults","tcolors","useColorMode","useState","searchTerm","setSearchTerm","resultsTimeoutRef","useRef","useEffect","clearTimeout","results","e","setTimeout","searchingTimeoutRef","InputContainer","IconContainer","LoaderContainer","CircleLoader","fill","invbackground","Input","type","onChange","event","scrollTo","value","onFocus","console","log","onScroll","preventDefault","spinTransition","loop","Infinity","ease","duration","Container","CircleLoaderContainer","animate","rotate","transition","motion","display","width","height","border","background","borderTop","borderRadius","position","boxSizing","paddingTop","paddingBottom","svg","transform","right","outline","borderWidth","borderColor","color","location","pageContext","posts","search","searchPageData","edges","node","searchResults","pages","Math","ceil","pageLength","numSearchResults","gridLayout","useContext","GridLayoutContext","Loading","SEO","pathname","Section","narrow","SearchContainer","SearchHeading","heading","term","title","toLowerCase","includes","dateForSEO","Horizontal","NumPostsHeader","PostsPaginator","show","margin","borderBottom","horizontalNav","marginTop","bottom","zIndex","padding","colorModeTransition","minHeight","Headings"],"mappings":"wOAAA,SAASA,EAAkBC,EAAQC,GACjC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CACrC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,I,0ECoJlD,E,qIA1HEO,SAAmB,E,EACnBC,MAAgB,EAAKX,MAAMY,U,EAC3BC,SAAmB,EAAKb,MAAMc,W,MDxBKC,EAAaC,EAAYC,E,+BCkG5DC,OAAA,WAA2B,IAAD,OAGxB,GAFcC,KAAKR,OAEN,EAAG,OAAO,KAEvB,IAAMS,EAAeD,KAAKC,aACpBC,EAAWF,KAAKE,SAChBC,EAAUH,KAAKnB,MAAMuB,YAAcJ,KAAKR,MACxCa,EAAcL,KAAKnB,MAAMuB,YAAc,EAEvCE,EAAM,SAACC,EAAGC,GAAJ,OAAYD,EAAIC,EAAKA,GAAKA,GAEtC,OACE,yBACE,QAACC,EAAA,EAAD,KACGJ,IAAe,gBAAMK,IAAI,OAAOC,KAAMV,IACtCE,IAAW,gBAAMO,IAAI,OAAOC,KAAMT,MAErC,QAACU,EAAD,KACGZ,KAAKnB,MAAMY,UAAY,IACtB,QAACoB,EAAD,CACEC,QAAS,WACP,EAAKjC,MAAMkC,eAAeT,EAAI,EAAKzB,MAAMuB,YAAc,EAAG,EAAKvB,MAAMY,YACrEuB,OAAOC,OAAO,CAAEC,IAAK,EAAGC,KAAM,EAAGC,SAAU,aAH/C,QASDpB,KAAKqB,aACLrB,KAAKnB,MAAMY,UAAY,IACtB,QAACoB,EAAD,CACEC,QAAS,WACP,EAAKjC,MAAMkC,eAAeT,EAAI,EAAKzB,MAAMuB,YAAc,EAAG,EAAKvB,MAAMY,YACrEuB,OAAOC,OAAO,CAAEC,IAAK,EAAGC,KAAM,EAAGC,SAAU,aAH/C,WDjIyBxB,E,GAAaC,E,yBC6BhD,WAAqC,IAAD,OAC5ByB,EAAUtB,KAAKnB,MAAMuB,YACrBZ,EAAQQ,KAAKnB,MAAMY,UACnBF,EAAWS,KAAKT,SAKhBgC,EAA2B,IAAZD,EAAgBA,EAAUA,EAAU,EAGnDE,GAAaC,QAAMF,EAAc/B,GAIjCkC,EAAuCF,EAAWG,MAAM,EAAGpC,GAiCjE,OA1BIiC,EAAW,GAAK,GAClBE,EAAeE,QAAQ,MAGrBJ,EAAW,GAAK,GAClBE,EAAeE,QAAQ,GAMrBJ,EAAW,GAAK,IAAMhC,GAASgC,EAAW,GAAK,EAAI,GACrDE,EAAeG,OAAOL,EAAWzC,OAAS,EAAIQ,EAAU,EAAGiC,EAAW,GAAK,GAKzEA,EAAW,GAAKjC,EAAWC,GAC7BkC,EAAeI,KAAK,MAIlBN,EAAW,GAAKjC,EAAW,EAAIC,GACjCkC,EAAeI,KAAKtC,GAGf,IAAI,IAAIuC,IAAIL,IAAiBM,KAAI,SAACC,EAAqBnD,GAAtB,OAC7B,OAATmD,GAEE,QAACC,EAAD,CAAQ5C,IAAG,wBAA0BR,EAAKqD,eAAa,KAGvD,QAACC,EAAD,CACE9C,IAAG,iBAAmB2C,EACtBI,MAAO,CAAEC,QAAShB,IAAYW,EAAO,EAAI,IACzCM,UAAU,sBACVzB,QAAS,WACP,EAAKjC,MAAMkC,eAAekB,GAC1BjB,OAAOC,OAAO,CAAEC,IAAK,EAAGC,KAAM,EAAGC,SAAU,aAG5Ca,WD3FOtD,EAAkBiB,EAAY4C,UAAW3C,GACrDC,GAAanB,EAAkBiB,EAAaE,G,GCmB1B2C,aA6HlBC,EAAsB,SAACC,GAAD,OAA8CC,QAA7C,uBAElBD,EAAEE,MAAMC,OAAOC,QAFE,qIAWxBC,eAXwB,+CAkBtBnC,GAAU,0FAIZ,SAAC8B,GAAD,OAA8CD,EAAoBC,KAJtD,0DAaVP,GAAgB,gGAIX,SAACO,GAAD,OAA2CA,EAAEE,MAAMC,OAAOC,UAJ/C,KAKlB,SAACJ,GAAD,OAA8CD,EAAoBC,KALhD,0DAchBT,GAAM,mDAER,SAACS,GAAD,OAA8CD,EAAoBC,KAF1D,8BAmBN/B,GAAK,qFAKPqC,cALO,4DAWPD,eAXO,kF,4CCzIX,EAzE6B,SAACnE,GAC5B,IAAQqE,EAA0DrE,EAA1DqE,SAAUC,EAAgDtE,EAAhDsE,iBAAkBC,EAA8BvE,EAA9BuE,YAAaC,EAAiBxE,EAAjBwE,OAAQC,EAASzE,EAATyE,KACjDvC,EAAmBlC,EAAnBkC,eACAwC,EAA4B1E,EAA5B0E,UAAWC,EAAiB3E,EAAjB2E,aACXC,EAAwB5E,EAAxB4E,oBAGFC,EAAwB,UADVC,UAApB,GACuCd,uBAA0BA,YAEjE,GAAoCe,cAAS,IAAtCC,EAAP,KAAmBC,EAAnB,KAMMC,GAAoBC,YAAO,OACjCC,gBAAU,WAC0B,OAA9BF,EAAkBzC,SACpB4C,aAAaH,EAAkBzC,SAGjC,IAAM6C,EAAUjB,EAASG,QAAO,SAACe,GAAD,OAAYf,EAAOe,EAAGP,MAAaP,KAAKA,GAExES,EAAkBzC,QAAU+C,YAAW,WACrCN,EAAkBzC,QAAU,KAC5B6B,EAAiBgB,GACjBV,EAAoBU,EAAQpF,UAC3B,KAEHoE,EAAiB,MAChB,CAACU,IAEJ,IAAMS,GAAsBN,YAAO,MAenC,OAdAC,gBAAU,WAC4B,OAAhCK,EAAoBhD,SACtB4C,aAAaI,EAAoBhD,SAGnCgD,EAAoBhD,QAAU+C,YAAW,WACvCC,EAAoBhD,QAAU,KAC9BkC,GAAa,KACZ,KAEHA,GAAa,GACbzC,EAAe,KACd,CAAC8C,KAGF,QAACU,EAAD,MACE,QAACC,EAAD,KACGjB,GACC,QAACkB,EAAD,MACE,QAACC,EAAD,QAGF,QAAC,eAAD,CAAkBC,KAAMjB,EAAQkB,kBAGpC,QAACC,EAAD,CACEC,KAAK,OACL1B,YAAaA,EACb2B,SAnDe,SAACC,GACpBhE,OAAOiE,SAAS,CAAE/D,IAAK,EAAGC,KAAM,EAAGC,SAAU,WAC7C0C,EAAckB,EAAMpG,OAAOsG,QAkDvBC,QAAS,SAAAf,GACPgB,QAAQC,IAAI,QAASjB,IAEvBkB,SAAU,SAAAlB,GACRA,EAAEmB,sBASNb,EAA6B,WACjC,IAAMc,EAAiB,CACrBC,KAAMC,IACNC,KAAM,SACNC,SAAU,GAGZ,OACE,QAACC,EAAD,MACE,QAACC,EAAD,CAAuBC,QAAS,CAAEC,OAAQ,KAAOC,WAAYT,MAK7DM,GAAwB,OAAOI,SAAP,sBAAoB,SAACvD,GAAD,MAA6B,CAC7EwD,QAAS,QACTC,MAAO,OACPC,OAAQ,OACRC,OAAO,iBAAkB3D,EAAEE,MAAMC,OAAOyD,WACxCC,UAAU,iBAAkB7D,EAAEE,MAAMC,OAAOC,QAC3C0D,aAAc,MACdC,SAAU,WACVC,UAAW,aACXzF,IAAK,SACLC,KAAM,YAVsB,IAaxB0E,GAAY,mCAAW,iBAAO,CAClCa,SAAU,WACVN,MAAO,OACPC,OAAQ,OACRM,UAAW,gBAJK,IAOZpC,GAAiB,mCAAW,iBAAO,CACvCmC,SAAU,WACVP,QAAS,eACTS,WAAY,OACZC,cAAe,OACfT,MAAO,OACPU,IAAK,CACHJ,SAAU,WACVxF,IAAK,MACL6F,UAAW,mBACXC,MAAO,WAVY,IAcjBvC,GAAkB,mCAAW,iBAAO,CACxCiC,SAAU,WACVM,MAAO,YAFe,IAKlBnC,GAAQ,qCAAa,SAAClC,GAAD,MAA6B,CACtDsE,QAAS,EACTC,YAAa,UACbC,YAAaxE,EAAEE,MAAMC,OAAO8B,cAC5BwC,MAAOzE,EAAEE,MAAMC,OAAO8B,cACtB2B,WAAY,cACZF,OAAQ,OACRO,WAAY,SACZR,MAAO,UARK,IAWR5B,GAAgB,mCAAW,iBAAO,KAAlB,I,+kBCtItB,IA8EA,EA9E6B,SAAC,GAA0C,IAAxC6C,EAAuC,EAAvCA,SAAUC,EAA6B,EAA7BA,YAChCC,EAAUD,EAAVC,MACAC,EAAWF,EAAYG,eAAeC,MAAM,GAAGC,KAA/CH,OAER,GAA0C5D,cAAS2D,GAA5CK,EAAP,KAAsBzE,EAAtB,KACM0E,EAAQC,KAAKC,KAAK,IAAIH,GAAe7I,OAASyI,EAAOQ,YAE3D,GAAsCpE,cAAS,GAAxCxD,EAAP,KAAoBW,EAApB,KAEA,GAAkC6C,eAAS,GAApCL,EAAP,KAAkBC,EAAlB,KAEA,GAAgDI,cAAS2D,EAAMxI,QAAxDkJ,EAAP,KAAyBxE,EAAzB,KAEQyE,GAAeC,gBAAWC,KAA1BF,WAgBR,OACE,QAACG,EAAA,EAAD,MACE,QAACC,EAAA,EAAD,CAAKC,SAAUlB,EAASkB,YACxB,QAACC,EAAA,EAAD,CAASC,QAAM,IACb,QAACC,EAAD,CAAiBR,WAAYA,IAC3B,QAACS,EAAD,KAAgBnB,EAAOoB,UACvB,QAAC,EAAD,CACEnF,oBAAqBA,EACrBmE,cAAeA,EACfzE,iBAAkBA,EAClBpC,eAAgBA,EAChBwC,UAAWA,EACXC,aAAcA,EACdN,SAAUqE,EACVlE,OA5BK,SAACe,EAAUyE,GACxB,OAAOzE,EAAE0E,MAAMC,cAAcC,SAASH,IAASzE,EAAE0E,MAAME,SAASH,IA4BxDvF,KAzBG,SAAC/C,EAAUC,GACtB,OAAID,EAAE0I,WAAazI,EAAEyI,YACX,EAEN1I,EAAE0I,WAAazI,EAAEyI,WACZ,EAEF,GAmBC7F,YAAaoE,EAAOpE,eAEtB,QAAC8F,EAAD,OACA,QAACC,EAAD,KAAiBlB,EAAjB,mBACA,QAAC,IAAD,CACEV,MAAOK,EAAcjG,MACnBvB,EAAcoH,EAAOQ,YACpB5H,EAAc,GAAKoH,EAAOQ,YAE7B5H,YAAaA,EACbmD,UAAWA,MAGf,QAAC6F,EAAD,CAAgBC,KAAM/B,EAAY7H,UAAY,IAC5C,QAAC,EAAD,GAEIA,UAAWoI,EACXrI,MAAOoI,EAAcjG,OAClBvB,EAAc,GAAKoH,EAAOQ,WAC3B5H,EAAcoH,EAAOQ,YACrBjJ,OACFY,WAAY,QACZoB,eAAgBA,EAChBX,YAAaA,GACVkH,QAWX4B,GAAa,mCAAW,SAACvG,GAAD,gBAC5B+D,SAAU,WACV4C,OAAQ,iBACRC,aAAa,aAAc5G,EAAEE,MAAMC,OAAO0G,gBAEzCvG,eAAsB,CACrBqG,OAAQ,aANkB,IAAX,IAabF,GAAiB,mCAAW,SAACzG,GAAD,cAC5BA,EAAE0G,MAAQ,CAAEI,UAAW,SADK,IAEhCrD,MAAO,WAFc,IASjBsC,GAAkB,mCAAW,SAAC/F,GAAD,gBACjC+D,SAAU,WACVgD,OAAQ,EACRvI,KAAM,EACNwI,OAAQ,EACRvD,MAAO,OACPwD,QAAS,gBACT3D,WAAYtD,EAAEE,MAAMgH,oBACpBC,UAAWnH,EAAEuF,WAAa,SAAW,WAEpCjF,gBAAuB,CACtB2G,QAAS,gBAXsB,IAAX,IAelBjB,GAAgB,OAAOoB,OAAP,6BACnB9G,gBAAuB,CACtB2G,QAAS,GAFS,OAMhBT,GAAiB,OAAOY,OAAP,6BACpB9G,gBAAuB,CACtB2G,QAAS,GAFU","file":"component---src-templates-search-template-tsx-9fe6c4d0efd8cd1827c6.js","sourcesContent":["function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { mediaquery, mediaqueryup } from '@styles/media';\nimport { IPaginator, ITAOAThemeUIContext } from '@types';\nimport { range } from '@utils';\n\nimport { css } from '@emotion/react';\nimport { SerializedStyles } from '@emotion/serialize';\nimport styled from '@emotion/styled';\nimport { ColorProperty } from 'csstype';\nimport { Link } from 'gatsby';\nimport React, { Component } from 'react';\nimport { Helmet } from 'react-helmet';\n\ninterface IPaginatorProps {\n  maxPages: number;\n  count: number;\n}\n\nconst Pagin: React.FC<{}> = ({ children }) => {};\n\n/**\n * <Paginator />\n *\n * 1 2 3 ... final page NEXT\n * Component to navigate between different pages on a series of blog post, for example.\n *\n * We're using a <nav> element here so make sure to put the pagination component\n * INSIDE of a section to make sure the markup stays contextually relevant\n *\n * Receives the gatsby-paginator props\n */\n\nclass Paginator extends Component<IPaginator, {}> {\n  maxPages: number = 3;\n  count: number = this.props.pageCount;\n  pageRoot: string = this.props.pathPrefix;\n\n  /**\n   * Utility function to return a 1 ... 5 6 7 ... 10 style pagination\n   */\n  get getPageLinks(): React.ReactNode {\n    const current = this.props.currentPage;\n    const count = this.props.pageCount;\n    const maxPages = this.maxPages;\n\n    // Current is the page we're on\n    // We want to show current - 1, current, current + 1\n    // Of course if we're on page 1, we don't want a page 0\n    const previousPage = current === 0 ? current : current - 1;\n\n    // Now create a range of numbers from the previousPage to the total pages (count)\n    const pagesRange = range(previousPage, count);\n\n    // We might need to truncate that pagesRange if it's\n    // more than the max pages we wish to display (3)\n    const truncatedRange: Array<number | null> = pagesRange.slice(0, maxPages);\n\n    // Throughout this function we might add a null to our pages range.\n    // When it comes to rendering our range if we find a null we'll add a spacer.\n\n    // We might need a spacer at the start of the pagination e.g. 1 ... 3 4 5 etc.\n    // If we're after the second page, we need a ... spacer (3 and up)\n    if (pagesRange[0] > 1) {\n      truncatedRange.unshift(null);\n    }\n    // If we're after the first page, we need page 1 to appear (2 and up)\n    if (pagesRange[0] > 0) {\n      truncatedRange.unshift(0);\n    }\n\n    // If we're on the final page, then there won't be a \"next\" page and\n    // the pagination will end up looking a bit short (e.g. on 8 pages ... 7, 8)\n    // Push to the end an extra page maxPages from the end\n    if (pagesRange[0] + 1 === count && pagesRange[0] - 1 > 0) {\n      truncatedRange.splice(pagesRange.length - 1 - maxPages, 0, pagesRange[0] - 1);\n    }\n\n    // We might need a spacer at the end of the pagination e.g. 4 5 6 ... 8\n    // If we're before the penultimate page, we need a ... spacer\n    if (pagesRange[0] + maxPages < count) {\n      truncatedRange.push(null);\n    }\n\n    // If we're before the last page, we need page <last> to appear\n    if (pagesRange[0] + maxPages - 1 < count) {\n      truncatedRange.push(count);\n    }\n\n    return [...new Set(truncatedRange)].map((page: number | null, i: number) =>\n      page === null ? (\n        // If you find a null in the truncated array then add a spacer\n        <Spacer key={`PaginatorPage_spacer_${i}`} aria-hidden={true} />\n      ) : (\n        // Otherwise render a PageButton\n        <PageNumberBUtton\n          key={`PaginatorPage_${page}`}\n          style={{ opacity: current === page ? 1 : 0.3 }}\n          className=\"Paginator__pageLink\"\n          onClick={() => {\n            this.props.setCurrentPage(page);\n            window.scroll({ top: 0, left: 0, behavior: 'smooth' });\n          }}\n        >\n          {page}\n        </PageNumberBUtton>\n      )\n    );\n  }\n\n  render(): React.ReactNode {\n    const count = this.count;\n\n    if (count <= 1) return null;\n\n    const previousPath = this.previousPath;\n    const nextPath = this.nextPath;\n    const hasNext = this.props.currentPage < this.count;\n    const hasPrevious = this.props.currentPage > 1;\n\n    const mod = (a, b) => ((a % b) + b) % b;\n\n    return (\n      <>\n        <Helmet>\n          {hasPrevious && <link rel=\"prev\" href={previousPath} />}\n          {hasNext && <link rel=\"next\" href={nextPath} />}\n        </Helmet>\n        <Frame>\n          {this.props.pageCount > 0 && (\n            <PageButton\n              onClick={() => {\n                this.props.setCurrentPage(mod(this.props.currentPage - 1, this.props.pageCount));\n                window.scroll({ top: 0, left: 0, behavior: 'smooth' });\n              }}\n            >\n              Prev\n            </PageButton>\n          )}\n          {this.getPageLinks}\n          {this.props.pageCount > 0 && (\n            <PageButton\n              onClick={() => {\n                this.props.setCurrentPage(mod(this.props.currentPage + 1, this.props.pageCount));\n                window.scroll({ top: 0, left: 0, behavior: 'smooth' });\n              }}\n            >\n              Next\n            </PageButton>\n          )}\n        </Frame>\n      </>\n    );\n  }\n}\n\nexport default Paginator;\n\nconst paginationItemMixin = (p: ITAOAThemeUIContext): SerializedStyles => css`\n  line-height: 1;\n  color: ${p.theme.colors.primary};\n  padding: 2rem;\n  width: 6.8rem;\n  height: 6.8rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-variant-numeric: tabular-nums;\n\n  ${mediaqueryup.desktop()} {\n    display: block;\n    width: auto;\n    height: auto;\n  }\n`;\n\nconst PageButton = styled.div`\n  font-weight: 600;\n  font-size: 18px;\n  text-decoration: none;\n  ${(p: ITAOAThemeUIContext): SerializedStyles => paginationItemMixin(p)}\n\n  &:hover,\n    &:focus {\n    opacity: 1;\n    text-decoration: underline;\n  }\n`;\n\nconst PageNumberBUtton = styled.div`\n  font-weight: 400;\n  font-size: 18px;\n  text-decoration: none;\n  color: ${(p: ITAOAThemeUIContext): ColorProperty => p.theme.colors.primary};\n  ${(p: ITAOAThemeUIContext): SerializedStyles => paginationItemMixin(p)}\n\n  &:hover,\n    &:focus {\n    opacity: 1;\n    text-decoration: underline;\n  }\n`;\n\nconst Spacer = styled.span`\n  opacity: 0.3;\n  ${(p: ITAOAThemeUIContext): SerializedStyles => paginationItemMixin(p)}\n  &::before {\n    content: '...';\n  }\n`;\n\n/* const MobileReference = styled.span`\n *   font-weight: 400;\n *   ${(p: ITAOAThemeUIContext): SerializedStyles => paginationItemMixin(p)}\n *   color: ${(p: ITAOAThemeUIContext): ColorProperty => p.theme.colors.primary};\n *\n *   em {\n *     font-style: normal;\n *     color: ${(p: ITAOAThemeUIContext): ColorProperty => p.theme.colors.primary};\n *   }\n * `; */\n\nconst Frame = styled.div`\n  position: relative;\n  z-index: 1;\n  display: inline-flex;\n\n  ${mediaquery.tablet()} {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n\n  ${mediaqueryup.desktop()} {\n    justify-content: space-between;\n    align-items: center;\n    justify-content: flex-start;\n  }\n`;\n","import Icons from '@icons';\nimport { ITAOAThemeUIContext } from '@types';\nimport { theme } from '@utils';\n\nimport styled from '@emotion/styled';\nimport * as CSS from 'csstype';\nimport { motion } from 'framer-motion';\nimport React, { useEffect, useState, useRef } from 'react';\nimport { useColorMode } from 'theme-ui';\n\nconst Search: React.FC<{}> = (props: any) => {\n  const { elements, setSearchResults, placeholder, filter, sort } = props;\n  const { setCurrentPage } = props;\n  const { searching, setSearching } = props;\n  const { setNumSearchResults } = props;\n\n  const [colorMode] = useColorMode();\n  const tcolors = colorMode === 'dark' ? theme.colors.modes.dark : theme.colors;\n\n  const [searchTerm, setSearchTerm] = useState('');\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n    window.scrollTo({ top: 0, left: 0, behavior: 'smooth' });\n    setSearchTerm(event.target.value);\n  };\n\n  const resultsTimeoutRef = useRef(null);\n  useEffect(() => {\n    if (resultsTimeoutRef.current !== null) {\n      clearTimeout(resultsTimeoutRef.current);\n    }\n\n    const results = elements.filter((e: any) => filter(e, searchTerm)).sort(sort);\n\n    resultsTimeoutRef.current = setTimeout(() => {\n      resultsTimeoutRef.current = null;\n      setSearchResults(results);\n      setNumSearchResults(results.length);\n    }, 375);\n\n    setSearchResults([]);\n  }, [searchTerm]);\n\n  const searchingTimeoutRef = useRef(null);\n  useEffect(() => {\n    if (searchingTimeoutRef.current !== null) {\n      clearTimeout(searchingTimeoutRef.current);\n    }\n\n    searchingTimeoutRef.current = setTimeout(() => {\n      searchingTimeoutRef.current = null;\n      setSearching(false);\n    }, 400);\n\n    setSearching(true);\n    setCurrentPage(0);\n  }, [searchTerm]);\n\n  return (\n    <InputContainer>\n      <IconContainer>\n        {searching ? (\n          <LoaderContainer>\n            <CircleLoader />\n          </LoaderContainer>\n        ) : (\n          <Icons.SearchIcon fill={tcolors.invbackground} />\n        )}\n      </IconContainer>\n      <Input\n        type=\"text\"\n        placeholder={placeholder}\n        onChange={handleChange}\n        onFocus={e => {\n          console.log('focus', e);\n        }}\n        onScroll={e => {\n          e.preventDefault();\n        }}\n      />\n    </InputContainer>\n  );\n};\n\nexport default Search;\n\nconst CircleLoader: React.FC<{}> = () => {\n  const spinTransition = {\n    loop: Infinity,\n    ease: 'linear',\n    duration: 1\n  };\n\n  return (\n    <Container>\n      <CircleLoaderContainer animate={{ rotate: 360 }} transition={spinTransition} />\n    </Container>\n  );\n};\n\nconst CircleLoaderContainer = styled(motion.span)((p: ITAOAThemeUIContext) => ({\n  display: 'block',\n  width: '2rem',\n  height: '2rem',\n  border: `0.25rem solid ${p.theme.colors.background}`,\n  borderTop: `0.25rem solid ${p.theme.colors.primary}`,\n  borderRadius: '50%',\n  position: 'absolute',\n  boxSizing: 'border-box',\n  top: '0.4rem',\n  left: '0.5rem'\n}));\n\nconst Container = styled.div(() => ({\n  position: 'relative',\n  width: '3rem',\n  height: '3rem',\n  boxSizing: 'border-box'\n}));\n\nconst InputContainer = styled.div(() => ({\n  position: 'relative',\n  display: 'inline-block',\n  paddingTop: '20px',\n  paddingBottom: '20px',\n  width: '100%',\n  svg: {\n    position: 'absolute',\n    top: '50%',\n    transform: 'translateY(-50%)',\n    right: '1rem'\n  }\n}));\n\nconst LoaderContainer = styled.div(() => ({\n  position: 'absolute',\n  right: '0.8rem'\n}));\n\nconst Input = styled.input((p: ITAOAThemeUIContext) => ({\n  outline: 0,\n  borderWidth: '0 0 2px',\n  borderColor: p.theme.colors.invbackground as CSS.ColorProperty,\n  color: p.theme.colors.invbackground as CSS.ColorProperty,\n  background: 'transparent',\n  height: '30px',\n  paddingTop: '0.5rem',\n  width: '100%'\n}));\n\nconst IconContainer = styled.div(() => ({}));\n","import PostsList from '../sections/posts/Posts.List';\nimport { GridLayoutContext } from '../sections/posts/Posts.List.Context';\n\nimport Headings from '@components/Headings';\nimport LoadingContainer from '@components/Loading';\nimport Paginator from '@components/Navigation/Navigation.Paginator';\nimport SEO from '@components/SEO';\nimport Search from '@components/Search';\nimport Section from '@components/Section';\nimport { mediaquery } from '@styles/media';\nimport { Template, TTemplate, IPost, ITAOAThemeUIContext } from '@types';\n\nimport styled from '@emotion/styled';\nimport React, { useState, useContext } from 'react';\n\nconst SearchPage: Template = ({ location, pageContext }: TTemplate) => {\n  const { posts } = pageContext;\n  const { search } = pageContext.searchPageData.edges[0].node;\n\n  const [searchResults, setSearchResults] = useState(posts);\n  const pages = Math.ceil([...searchResults].length / search.pageLength);\n\n  const [currentPage, setCurrentPage] = useState(0);\n\n  const [searching, setSearching] = useState(true);\n\n  const [numSearchResults, setNumSearchResults] = useState(posts.length);\n\n  const { gridLayout } = useContext(GridLayoutContext);\n\n  const filter = (e: IPost, term: string): boolean => {\n    return e.title.toLowerCase().includes(term) || e.title.includes(term);\n  };\n\n  const sort = (a: IPost, b: IPost): number => {\n    if (a.dateForSEO > b.dateForSEO) {\n      return -1;\n    }\n    if (a.dateForSEO < b.dateForSEO) {\n      return 1;\n    }\n    return 0;\n  };\n\n  return (\n    <LoadingContainer>\n      <SEO pathname={location.pathname} />\n      <Section narrow>\n        <SearchContainer gridLayout={gridLayout}>\n          <SearchHeading>{search.heading}</SearchHeading>\n          <Search\n            setNumSearchResults={setNumSearchResults}\n            searchResults={searchResults}\n            setSearchResults={setSearchResults}\n            setCurrentPage={setCurrentPage}\n            searching={searching}\n            setSearching={setSearching}\n            elements={posts}\n            filter={filter}\n            sort={sort}\n            placeholder={search.placeholder}\n          />\n          <Horizontal />\n          <NumPostsHeader>{numSearchResults} results found</NumPostsHeader>\n          <PostsList\n            posts={searchResults.slice(\n              currentPage * search.pageLength,\n              (currentPage + 1) * search.pageLength\n            )}\n            currentPage={currentPage}\n            searching={searching}\n          />\n        </SearchContainer>\n        <PostsPaginator show={pageContext.pageCount > 1}>\n          <Paginator\n            {...{\n              pageCount: pages,\n              count: searchResults.slice(\n                (currentPage - 1) * search.pageLength,\n                currentPage * search.pageLength\n              ).length,\n              pathPrefix: '/bluh',\n              setCurrentPage: setCurrentPage,\n              currentPage: currentPage,\n              ...pageContext\n            }}\n          />\n        </PostsPaginator>\n      </Section>\n    </LoadingContainer>\n  );\n};\n\nexport default SearchPage;\n\nconst Horizontal = styled.div((p: ITAOAThemeUIContext) => ({\n  position: 'relative',\n  margin: '20px auto 50px',\n  borderBottom: `2px solid ${p.theme.colors.horizontalNav}`,\n\n  [mediaquery.tablet()]: {\n    margin: '20px auto'\n  }\n}));\n\ninterface IPostsPaginator extends ITAOAThemeUIContext {\n  show: boolean;\n}\nconst PostsPaginator = styled.div((p: IPostsPaginator) => ({\n  ...(p.show && { marginTop: '95px' }),\n  width: '100%'\n}));\n\ninterface ISearchContainerProps extends ITAOAThemeUIContext {\n  gridLayout: string;\n}\n\nconst SearchContainer = styled.div((p: ISearchContainerProps) => ({\n  position: 'relative',\n  bottom: 0,\n  left: 0,\n  zIndex: 1,\n  width: '100%',\n  padding: '200px 0px 0px',\n  transition: p.theme.colorModeTransition,\n  minHeight: p.gridLayout ? '1600px' : '1000px',\n\n  [mediaquery.phablet()]: {\n    padding: '150px 30px 0'\n  }\n}));\n\nconst SearchHeading = styled(Headings.h2)({\n  [mediaquery.phablet()]: {\n    padding: 0\n  }\n});\n\nconst NumPostsHeader = styled(Headings.h5)({\n  [mediaquery.phablet()]: {\n    padding: 0\n  }\n});\n"],"sourceRoot":""}