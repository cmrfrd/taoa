{"version":3,"sources":["webpack://TAOA/./src/sections/posts/Posts.List.tsx"],"names":["posts","alwaysShowAllDetails","currentPage","searching","gridLayout","useContext","GridLayoutContext","gridRowAnimationDurationSeconds","useStaticQuery","allSite","edges","node","siteMetadata","transition","PostsListContainer","animatePresenceProps","initial","exitBeforeEnter","motionKey","duration","motionProps","animate","ListLayoutContainer","key","List","reverse","map","ap","index","ListItem","post","narrow","hasOverflow","title","length","imageSource","hero","regular","hasHeroImage","Object","keys","constructor","PostLink","to","slug","data-a11y","Item","ImageContainer","src","Title","Excerpt","excerpt","MetaData","date","timeToRead","showDetails","mediaqueries","p","listTile","css","listItemRow","theme","colors","card","listItemTile","listRow","background","invPrimary","position","boxShadow","marginBottom","height","overflow","borderTopRightRadius","borderTopLeftRadius","Headings","fontSize","fontFamily","fonts","serif","padding","WebkitLineClamp","color","grey","display","maxWidth","mediaquery","opacity","Link","width","top","left","paddingBottom","borderRadius","zIndex","transform","accent","content","border"],"mappings":"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","file":"927a8828-d7f44fde360d281b536a.js","sourcesContent":["import { GridLayoutContext } from './Posts.List.Context';\n\nimport FadeTransition from '@components/FadeTransition';\nimport Headings from '@components/Headings';\nimport Image, { ImagePlaceholder } from '@components/Image';\nimport mediaqueries, { mediaquery } from '@styles/media';\nimport { IPost, ITAOAThemeUIContext } from '@types';\n\nimport { css } from '@emotion/react';\nimport styled from '@emotion/styled';\nimport { Link, graphql, useStaticQuery } from 'gatsby';\nimport React, { useContext } from 'react';\n\n/**\n * Tiles\n * [LONG], [SHORT]\n * [SHORT], [LONG]\n * [SHORT], [LONG]\n *\n * or ------------\n *\n * Rows\n * [LONG]\n * [LONG]\n * [LONG]\n */\n\ninterface IPostsListProps {\n  posts: IPost[];\n  alwaysShowAllDetails?: boolean;\n  currentPage?: number;\n  searching?: boolean;\n}\n\nconst siteQuery = graphql`\n  {\n    allSite {\n      edges {\n        node {\n          siteMetadata {\n            transition {\n              gridRowAnimationDurationSeconds\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst PostsList: React.FC<IPostsListProps> = ({\n  posts,\n  alwaysShowAllDetails,\n  currentPage,\n  searching\n}: IPostsListProps) => {\n  if (!posts) return null;\n\n  const { gridLayout } = useContext(GridLayoutContext);\n  const { gridRowAnimationDurationSeconds } = useStaticQuery(\n    siteQuery\n  ).allSite.edges[0].node.siteMetadata.transition;\n\n  /*\n   * Three transitions are here for three possible interactions that\n   * can affect the visibility of the posts.\n   * 1. Change from grid layout to row layout\n   * 2. Change of page\n   * 3. Searching for an post\n   */\n  return (\n    <PostsListContainer alwaysShowAllDetails={alwaysShowAllDetails}>\n      <FadeTransition\n        animatePresenceProps={{ initial: false, exitBeforeEnter: true }}\n        motionKey={currentPage}\n        duration={gridRowAnimationDurationSeconds}\n      >\n        <FadeTransition\n          animatePresenceProps={{ exitBeforeEnter: true }}\n          motionKey={gridLayout}\n          duration={gridRowAnimationDurationSeconds}\n        >\n          <FadeTransition\n            animatePresenceProps={{ exitBeforeEnter: true }}\n            motionKey={gridLayout}\n            duration={gridRowAnimationDurationSeconds}\n            motionProps={{\n              animate: searching ? 'exit' : 'enter'\n            }}\n          >\n            <ListLayoutContainer key={gridLayout} gridLayout={gridLayout} posts={posts} />\n          </FadeTransition>\n        </FadeTransition>\n      </FadeTransition>\n    </PostsListContainer>\n  );\n};\n\nexport default PostsList;\n\ninterface IListLayoutContainerProps {\n  posts: any;\n  gridLayout: any;\n}\n\nconst ListLayoutContainer: React.FC<IListLayoutContainerProps> = ({\n  posts,\n  gridLayout,\n  ...props\n}: IListLayoutContainerProps) => {\n  return (\n    <List gridLayout={gridLayout} reverse={true}>\n      {[...posts].map((ap: IPost, index: number) => (\n        <ListItem key={index} post={ap} narrow={true} gridLayout={gridLayout} />\n      ))}\n    </List>\n  );\n};\n\ninterface IPostsListItemProps {\n  post: IPost;\n  narrow?: boolean;\n  gridLayout: string;\n}\n\nconst ListItem: React.FC<IPostsListItemProps> = ({\n  post,\n  narrow,\n  gridLayout\n}: IPostsListItemProps) => {\n  if (!post) return null;\n\n  const hasOverflow = narrow && post.title.length > 35;\n  const imageSource = narrow ? post.hero.narrow : post.hero.regular;\n  const hasHeroImage =\n    imageSource && Object.keys(imageSource).length !== 0 && imageSource.constructor === Object;\n\n  return (\n    <PostLink to={post.slug} data-a11y=\"false\">\n      <Item gridLayout={gridLayout}>\n        <ImageContainer narrow={narrow} gridLayout={gridLayout}>\n          {hasHeroImage ? <Image src={imageSource} /> : <ImagePlaceholder />}\n        </ImageContainer>\n        <div>\n          <Title hasOverflow={hasOverflow} gridLayout={gridLayout}>\n            {post.title}\n          </Title>\n          <Excerpt narrow={narrow} hasOverflow={hasOverflow} gridLayout={gridLayout}>\n            {post.excerpt}\n          </Excerpt>\n          <MetaData>\n            {post.date} Â· {post.timeToRead} min read\n          </MetaData>\n        </div>\n      </Item>\n    </PostLink>\n  );\n};\n\nconst wide = '1fr';\nconst narrow = '1fr';\n\nconst limitToTwoLines = css`\n  text-overflow: ellipsis;\n  overflow-wrap: normal;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  display: -webkit-box;\n  white-space: normal;\n  overflow: hidden;\n\n  ${mediaqueries.phablet`\n                       -webkit-line-clamp: 3;\n`}\n`;\n\nconst showDetails = css`\n  p {\n    display: -webkit-box;\n  }\n\n  h2 {\n    margin-bottom: 10px;\n  }\n`;\n\nconst PostsListContainer = styled.div<{ alwaysShowAllDetails?: boolean }>`\n  transition: opacity 0.25s;\n  padding-top: 20px;\n  min-height: 300px;\n  ${p => p.alwaysShowAllDetails && showDetails}\n`;\n\nconst listTile = p => css`\n  position: relative;\n  display: grid;\n  grid-template-columns: ${narrow} ${narrow};\n  grid-template-rows: 2;\n  column-gap: 60px;\n\n  &:not(:last-child) {\n    margin-bottom: 75px;\n  }\n\n  ${mediaqueries.desktop_medium`\ngrid-template-columns: 1fr 1fr;\n`}\n\n  ${mediaqueries.tablet`\ngrid-template-columns: 1fr;\n\n                  &:not(:last-child) {\n                      margin-bottom: 0;\n                  }\n`}\n`;\n\nconst listItemRow = p => css`\n  display: grid;\n  grid-template-rows: 1fr;\n  grid-template-columns: 1fr 400px;\n  grid-column-gap: 80px;\n  grid-template-rows: 1;\n  align-items: center;\n  position: relative;\n  margin-bottom: 20px;\n\n  ${mediaqueries.desktop`\ngrid-column-gap: 24px;\ngrid-template-columns: 1fr 380px;\n`}\n\n  ${mediaqueries.tablet`\ngrid-template-columns: 1fr;\n`}\n\n  @media (max-width: 540px) {\n    background: ${p.theme.colors.card};\n  }\n\n  ${mediaqueries.phablet`\nbox-shadow: 0px 20px 40px rgba(0, 0, 0, 0.2);\nborder-bottom-right-radius: 5px;\nborder-bottom-left-radius: 5px;\n`}\n`;\n\nconst listItemTile = (p: ITAOAThemeUIContext) => css`\n  position: relative;\n\n  ${mediaqueries.tablet`\nmargin-bottom: 60px;\n`}\n\n  @media (max-width: 540px) {\n    background: ${p.theme.colors.card};\n  }\n\n  ${mediaqueries.phablet`\nmargin-bottom: 40px;\nbox-shadow: 0px 20px 40px rgba(0, 0, 0, 0.2);\nborder-bottom-right-radius: 5px;\nborder-bottom-left-radius: 5px;\n`}\n`;\n\n// If only 1 post, dont create 2 rows.\nconst listRow = css`\n  display: grid;\n  grid-template-rows: '1fr 1fr';\n`;\n\nconst List = styled.div<{\n  reverse: boolean;\n  gridLayout: string;\n}>`\n  justify-content: ${p => (p.gridLayout === 'tiles' ? 'space-between' : 'none')};\n  ${p => (p.gridLayout === 'tiles' ? listTile : listRow)}\n`;\n\nconst Item = styled.div<{ gridLayout: string }>`\n  ${p => (p.gridLayout === 'rows' ? listItemRow : listItemTile)}\n`;\n\ninterface IImageContainerProps extends ITAOAThemeUIContext {\n  narrow: boolean;\n  gridLayout: string;\n}\n\nconst ImageContainer = styled.div((p: IImageContainerProps) => ({\n  background: p.theme.colors.invPrimary,\n  position: \"relative\",\n  boxShadow: `0 30px 60px -10px rgba(0, 0, 0, ${p.narrow ? 0.22 : 0.3}), 0 18px 36px -18px rgba(0, 0, 0, ${p.narrow ? 0.25 : 0.33})`,\n  marginBottom: (p.gridLayout === 'tiles' ? '30px' : 0),\n  transition: \"transform 0.3s var(--ease-out-quad), box-shadow 0.3s var(--ease-out-quad)\",\n  \n  \"& > div\": {\n    height: \"100%\"\n  },\n\n  [mediaqueries.tablet()]: {\n    height: \"200px\",\n    marginBottom: \"35px\"    \n  },\n\n  [mediaqueries.phablet()]: {\n    overflow: 'hidden',\n    marginBottom: 0,\n    boxShadow: 'none',\n    borderTopRightRadius: \"5px\",\n    borderTopLeftRadius: \"5px\"        \n  }\n}));\n\ninterface ITitleProps extends ITAOAThemeUIContext {\n  hasOverflow: boolean;\n  gridLayout: string;\n}\n\nconst Title = styled(Headings.h2)((p: ITitleProps) => ({\n  fontSize: \"21px\",\n  fontFamily: p.theme.fonts.serif,\n  marginBottom: (p.hasOverflow && p.gridLayout === 'tiles' ? '35px' : '10px'),\n  transition: \"color 0.3s ease-in-out\",\n\n  [mediaqueries.desktop()]: {\n    padding: \"15px 20px 0\",\n    marginBottom: \"15px\"\n  },\n\n  [mediaqueries.tablet()]: {\n    fontSize: \"22px\",\n    marginBottom: \"10px\",\n    WebkitLineClamp: 3    \n  }\n}))\n\ninterface IExcerptProps extends ITAOAThemeUIContext {\n  hasOverflow: boolean;\n  narrow: boolean;\n  gridLayout: string;\n}\n\nconst Excerpt = styled.p((p: IExcerptProps) => ({\n  fontSize: '16px',\n  marginBottom: '10px',\n  color: p.theme.colors.grey,\n  display: p.hasOverflow && p.gridLayout === 'tiles' ? 'none' : 'box',\n  maxWidth: p.narrow ? '415px' : '515px',\n\n  [mediaquery.desktop()]: {\n    display: '-webkit-box'\n  },\n\n  [mediaquery.phablet()]: {\n    marginBottom: '15px'\n  },\n\n  [mediaquery.phablet()]: {\n    maxWidth: '100%',\n    padding: '0 20px',\n    marginBottom: '10px',\n    WebkitLineClamp: 3\n  }\n}));\n\nconst MetaData = styled.div((p: ITAOAThemeUIContext) => ({\n  fontSize: '16px',\n  color: `${p.theme.colors.grey}`,\n  opacity: 0.33,\n\n  [mediaquery.phablet()]: {\n    maxWidth: '100%',\n    padding: '0 20px 20px'\n  }\n}));\n\nconst PostLink = styled(Link)((p: ITAOAThemeUIContext) => ({\n  position: 'relative',\n  display: 'block',\n  width: '100%',\n  height: '100%',\n  top: 0,\n  left: 0,\n  paddingBottom: '30px',\n  borderRadius: '5px',\n  zIndex: 1,\n  transition: 'transform 0.33s var(--ease-out-quart)',\n\n  [`&:hover ${ImageContainer}, &:focus ${ImageContainer}`]: {\n    transform: 'translateY(-1px)',\n    boxShadow: '0 50px 80px -20px rgba(0, 0, 0, 0.27), 0 30px 50px -30px rgba(0, 0, 0, 0.3)'\n  },\n\n  [`&:hover h2, &:focus h2`]: {\n    color: `${p.theme.colors.accent}`\n  },\n\n  [`&[data-a11y='true']:focus::after`]: {\n    content: '\" \"',\n    position: 'absolute',\n    left: '-1.5%',\n    top: '-2%',\n    width: '103%',\n    height: '104%',\n    border: `3px solid ${p.theme.colors.accent}`,\n    background: `rgba(255, 255, 255, 0.01)`,\n    borderRadius: `5px`\n  },\n\n  [mediaquery.phablet()]: {\n    [`&:hover ${ImageContainer}`]: {\n      transform: 'none',\n      boxShadow: 'initial'\n    },\n\n    '&:active': {\n      transform: 'scale(0.97) translateY(3px)'\n    }\n  }\n}));\n\n/* const PostLink = styled(Link)`\n *   position: relative;\n *   display: block;\n *   width: 100%;\n *   height: 100%;\n *   top: 0;\n *   left: 0;\n *   padding-bottom: 30px;\n *   border-radius: 5px;\n *   z-index: 1;\n *   transition: transform 0.33s var(--ease-out-quart);\n *   -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n *\n *   &:hover ${ImageContainer}, &:focus ${ImageContainer} {\n *     transform: translateY(-1px);\n *     box-shadow: 0 50px 80px -20px rgba(0, 0, 0, 0.27), 0 30px 50px -30px rgba(0, 0, 0, 0.3);\n *   }\n *\n *   &: hover h2;\n *   &:focus h2 {\n *     color: ${p => p.theme.colors.accent};\n *   }\n *\n *   &[data-a11y='true']:focus::after {\n *     content: '\" \"';\n *     position: absolute;\n *     left: -1.5%;\n *     top: -2%;\n *     width: 103%;\n *     height: 104%;\n *     border: 3px solid ${p => p.theme.colors.accent};\n *     background: rgba(255, 255, 255, 0.01);\n *     border-radius: 5px;\n *   }\n *\n *   ${mediaqueries.phablet`\n *                    &:hover ${ImageContainer} {\n *                        transform: none;\n *                        box-shadow: initial;\n *                    }\n *\n *                    &:active {\n *                        transform: scale(0.97) translateY(3px);\n *                    }\n * `}\n * `; */\n"],"sourceRoot":""}